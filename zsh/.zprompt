# -- .zprompt ------------------------------------------------------ {{{

autoload -U colors && colors

red="%{$fg[red]%}"
green="%{$fg[green]%}"
yellow="%{$fg[yellow]%}"
cyan="%{$fg[cyan]%}"
reset="%{$reset_color%}"

function __git_branch() {
  git branch 2> /dev/null | sed -e "/^[^*]/d" -e "s/* \(.*\)/(\1)/"
}

PROMPT="$green%n $red%~ $yellow\$(__git_branch)
$cyan\$$reset "
SPROMPT="Correct $red%R$reset to $green%r$reset? (yes, no, abort, edit) "

function zle-line-init zle-keymap-select {
  RPROMPT="${${KEYMAP/(vicmd|opp)/NORMAL}/(main|viins)/INSERT}"
  zle reset-prompt
}

zle -N zle-line-init
zle -N zle-keymap-select

autoload -U promptinit && promptinit

unset red
unset green
unset yellow
unset cyan
unset reset

# }}}

# vim:foldmethod=marker:filetype=zsh
